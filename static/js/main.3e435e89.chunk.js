(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});var n=a(7),r=a(258),s=a(342);function o(t){var a,o,c,i,l=s.parse(t),p=(o=n.c,a=o.replace(/-/g,"+").replace(/_/g,"/"),e.from?e.from(a,"base64"):new e(a,"base64")),u=(c=p,i=l.path,r.createHmac("sha1",c).update(i).digest("base64").replace(/\+/g,"-").replace(/\//g,"_"));return s.format(l)+"&signature="+u}}).call(this,a(17).Buffer)},168:function(e,t,a){e.exports=a(349)},173:function(e,t,a){},259:function(e,t){},261:function(e,t){},295:function(e,t){},296:function(e,t){},349:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),o=a.n(s),c=(a(173),a(19)),i=a(20),l=a(23),p=a(21),u=a(22),d=(a(74),a(60)),h=a.n(d),m=a(32),f=a.n(m),g=a(70),y=a.n(g),v=a(44),b=a.n(v),E=a(94),k=a.n(E),j=a(57),O=a.n(j),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{bg:"light",expand:"lg"},r.a.createElement(h.a.Brand,{href:"#home"},"Project Landmark"),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(y.a,{className:"mr-auto"},r.a.createElement(y.a.Link,{href:"#home"},"Home"),r.a.createElement(y.a.Link,{href:"#link"},"Link"),r.a.createElement(b.a,{title:"Dropdown",id:"basic-nav-dropdown"},r.a.createElement(b.a.Item,{href:"#action/3.1"},"Action"),r.a.createElement(b.a.Item,{href:"#action/3.2"},"Another action"),r.a.createElement(b.a.Item,{href:"#action/3.3"},"Something"),r.a.createElement(b.a.Divider,null),r.a.createElement(b.a.Item,{href:"#action/3.4"},"Separated link"))),r.a.createElement(f.a,{inline:!0},r.a.createElement(k.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(O.a,{variant:"outline-success"},"Search"))))}}]),t}(r.a.Component),C=a(35),w=a(2),S=a(95),P=a.n(S),U=a(7),A="https://maps.googleapis.com/maps/api/geocode/json?",M="AIzaSyAApJlSsL7fsf9ElKRHLLOhEM2pZM00-ho";function z(e,t,a){var n,r=e.coords.lat,s=e.coords.lng;fetch(U.a+"places/nearby/"+r+"/"+s+"/"+t,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return n=e.headers.get("Pragma"),e.json()}).then(function(e){return a(e,n)}).catch(function(e){return console.error("Error:",e)})}function T(e,t){null!=e&&fetch(U.a+"places/pages/"+e,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return e=t.headers.get("Pragma"),t.json()}).then(function(a){return t(a,e)}).catch(function(e){return console.error("Error:",e)})}var I="business_type:updateBusinessType";function x(e){return{type:I,payload:{business_type:e}}}var R="state:updateReady";var D=a(26),B=a(10),N=a(29),L=a.n(N),Z=a(39),F=a(71),G=a.n(F),H="address:updateAddress";var K="zip:updateZip";var W="state:updateState";var Y=Object(B.a)(function(e){return e.active_place},function(e){return e}),J=Object(B.a)(function(e){return e.address},function(e){return e}),Q=Object(B.a)(function(e){return e.business_type},function(e){return e}),X=Object(B.a)(function(e){return e.data_range},function(e){return e}),V=Object(B.a)(function(e){return e.places},function(e){return e}),q=Object(B.a)(function(e){return e.state},function(e){return e}),$=Object(B.a)(function(e){return e.tract},function(e){return e}),ee=Object(B.a)(function(e){return e.user},function(e){return e}),te=Object(B.a)(function(e){return e.zip},function(e){return e}),ae=Object(B.a)(function(e){return e.ready},function(e){return e}),ne=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState({address:e})},a.handleSelect=function(){var e=Object(Z.a)(L.a.mark(function e(t){var n,r,s,o,c,i,l;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.handleChange(t),e.next=3,Object(F.geocodeByAddress)(t).then(function(e){var t=!0,a=!1,i=void 0;try{for(var l,p=e[0].address_components[Symbol.iterator]();!(t=(l=p.next()).done);t=!0){var u=l.value,d=!0,h=!1,m=void 0;try{for(var f,g=u.types[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var y=f.value;"street_number"==y&&(r=u.long_name),"route"==y&&(s=u.short_name),"locality"==y&&(o=u.long_name),"administrative_area_level_1"==y&&(c=u.short_name),"postal_code"==y&&(n=u.long_name)}}catch(v){h=!0,m=v}finally{try{d||null==g.return||g.return()}finally{if(h)throw m}}}}catch(v){a=!0,i=v}finally{try{t||null==p.return||p.return()}finally{if(a)throw i}}return console.log(e),Object(F.getLatLng)(e[0])}).then(function(e){return e}).catch(function(e){return console.error("Error",e)});case 3:i=e.sent,(l={}).formatted=t,l.street=r+""+s,l.city=o,l.state=c,l.zip=n,l.coords=i,a.onUpdateAddress(l);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={address:""},a.handleChange=a.handleChange.bind(Object(w.a)(a)),a.onUpdateAddress=a.onUpdateAddress.bind(Object(w.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onUpdateAddress",value:function(e){this.props.onUpdateAddress(e)}},{key:"render",value:function(){return r.a.createElement(G.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,s=e.loading;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({style:{width:"100%"}},t({placeholder:"Search Places ...",className:"location-search-input"}))),r.a.createElement("div",{className:"autocomplete-dropdown-container"},s&&r.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:t,style:a}),r.a.createElement("span",null,e.description))})))})}}]),t}(r.a.Component),re=Object(B.a)(J,Q,te,q,function(e,t,a,n){return{address:e,business_type:t,zip:a,state:n}}),se={onUpdateAddress:function(e){return{type:H,payload:{address:e}}},onUpdateBusinessType:x,onUpdateZip:function(e){return{type:K,payload:{zip:e}}},onUpdateState:function(e){return{type:W,payload:{state:e}}}},oe=Object(D.b)(re,se)(ne),ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onUpdateUser=a.onUpdateUser.bind(Object(w.a)(a)),a.onFormChange=a.onFormChange.bind(Object(w.a)(a)),a.onBusinessFormChange=a.onBusinessFormChange.bind(Object(w.a)(a)),a.submitAddress=a.submitAddress.bind(Object(w.a)(a)),a.onUpdateBusinessType=a.onUpdateBusinessType.bind(Object(w.a)(a)),a.getCoords=a.getCoords.bind(Object(w.a)(a)),a.dispatchAddress=a.dispatchAddress.bind(Object(w.a)(a)),a.onUpdateReady=a.onUpdateReady.bind(Object(w.a)(a)),a.onHandleSubmit=a.onHandleSubmit.bind(Object(w.a)(a)),a.state={},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"onUpdateUser",value:function(e){this.props.onUpdateUser(e.target.value)}},{key:"onUpdateBusinessType",value:function(e){this.props.onUpdateBusinessType(e)}},{key:"onFormChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"onBusinessFormChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value)),this.onUpdateBusinessType(e.target.value)}},{key:"onUpdateReady",value:function(e){this.props.onUpdateReady(e)}},{key:"onHandleSubmit",value:function(){this.props.address.toString().length>0?this.onUpdateReady(!0):this.onUpdateReady(!1)}},{key:"submitAddress",value:function(e){void 0!==this.state.street&&void 0!==this.state.city&&void 0!==this.state.state&&void 0!==this.state.zip&&(console.log("Attempt submit"),function(e,t,a,n){var r=e.replace(/ /g,"+"),s=t.replace(/ /g,"+"),o=a.replace(/ /g,"+");fetch(A+"address="+r+",+"+s+",+"+o+"&key="+M).then(function(e){return e.json()}).then(function(e){return n(e)})}(this.state.street,this.state.city,this.state.state,this.getCoords))}},{key:"getCoords",value:function(e){var t=e.results;t.length>1&&console.log("ERROR, Multiple Locations");var a=t[0].geometry.location;this.setState({coords:a}),this.dispatchAddress()}},{key:"dispatchAddress",value:function(){if(void 0!==this.state.street&&void 0!==this.state.city&&void 0!==this.state.state&&void 0!==this.state.zip&&void 0!==this.state.coords){var e={};e.street=this.state.street,e.city=this.state.city,e.state=this.state.state,e.zip=this.state.zip,e.coords=this.state.coords,this.onUpdateAddress(e),this.onUpdateZip(this.state.zip),this.onUpdateState(this.state.state)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"lookup-form-block"},r.a.createElement("br",null),r.a.createElement(f.a.Label,{color:"black"},"Address"),r.a.createElement(oe,null),r.a.createElement("br",null),r.a.createElement(f.a.Row,null,r.a.createElement(f.a.Group,{as:P.a,controlId:"formGridZip"},r.a.createElement(f.a.Label,null,"Business Type"),r.a.createElement(f.a.Control,{as:"select",name:"business_type",onChange:this.onBusinessFormChange},r.a.createElement("option",null,"restaurant"),r.a.createElement("option",null,"bar"),r.a.createElement("option",null,"cafe"),r.a.createElement("option",null,"beauty_salon"),r.a.createElement("option",null,"clothing_store"),r.a.createElement("option",null,"convenvience_store"),r.a.createElement("option",null,"locksmith"),r.a.createElement("option",null,"bakery"),r.a.createElement("option",null,"car_dealer"),r.a.createElement("option",null,"supermarket")))),r.a.createElement(f.a,null,r.a.createElement(O.a,{variant:"primary",onClick:this.onHandleSubmit},"Submit")))}}]),t}(r.a.Component),ie=Object(B.a)(Q,ae,J,function(e,t,a){return{business_type:e,ready:t,address:a}}),le={onUpdateBusinessType:x,onUpdateReady:function(e){return{type:R,payload:{ready:e}}}},pe=Object(D.b)(ie,le)(ce),ue=a(59),de=a.n(ue),he=a(36),me=a.n(he),fe=a(34),ge=a.n(fe),ye="users:updateUser",ve="users:showError";function be(){return{type:ve,payload:{user:"ERROR!!"}}}function Ee(e,t,a){return fetch(U.a+"demo/stats/"+a+"/"+e+"/"+t).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}var ke="data_range:updateDataRange";var je="zip code tabulation area",Oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={},a.onUpdateDataRange=a.onUpdateDataRange.bind(Object(w.a)(a)),a.getData=a.getData.bind(Object(w.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onUpdateDataRange",value:function(e){var t=e.target.value;"zip"===t?this.props.onUpdateDataRange(je):"tradeZone"==t&&this.props.onUpdateDataRange("tradeZone")}},{key:"componentDidMount",value:function(){var e=Object(Z.a)(L.a.mark(function e(){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(Z.a)(L.a.mark(function e(){var t=this;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(this.props.lat,this.props.lng,"zip").then(function(e){return t.setState({zipStats:e})});case 2:return e.next=4,Ee(this.props.lat,this.props.lng,"tradezone").then(function(e){return t.setState({tradeZoneStats:e})});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){console.log(this.state);var e={summary:{gender:{}},race:{},education:{},marital_status:{},employment:{},transportation:{}},t={};this.props.data_range==je?null!=this.state.zipStats&&(e=this.state.zipStats.social,t=this.state.zipStats.income):"tradeZone"==this.props.data_range&&null!=this.state.tradeZoneStats&&(e=this.state.tradeZoneStats.social,t=this.state.tradeZoneStats.income);var a=function(e){var t=e.name,a=e.data,n=e.key_i;return r.a.createElement(ge.a,null,r.a.createElement(me.a.Toggle,{as:ge.a.Header,eventKey:n},t),r.a.createElement(me.a.Collapse,{eventKey:n},r.a.createElement(ge.a.Body,null,r.a.createElement("div",{style:{overflowX:"auto",overflowY:"auto",width:"100%"}},r.a.createElement(de.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("tbody",null,Object.entries(a).map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]))})))))))};return r.a.createElement("div",{className:this.props.orientation},r.a.createElement("div",{style:{width:"100hv"}}),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("strong",null,"Demographics")),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("button",{className:"map-control_button",onClick:this.onUpdateDataRange,value:"zip",style:{margin:"auto",width:"50%",height:"10%",padding:"0"}},"Zip"),r.a.createElement("button",{className:"map-control_button",onClick:this.onUpdateDataRange,value:"tradeZone",style:{margin:"auto",width:"50%",height:"10%",padding:"0"}},"Trade Zone"),r.a.createElement("br",null)),r.a.createElement(me.a,{defaultActiveKey:"0"},r.a.createElement(ge.a,null,r.a.createElement(me.a.Toggle,{as:ge.a.Header,eventKey:"0"},"General"),r.a.createElement(me.a.Collapse,{eventKey:"0"},r.a.createElement(ge.a.Body,null,r.a.createElement(de.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Business"),r.a.createElement("td",null,this.props.business_type)),r.a.createElement("tr",null,r.a.createElement("td",null,"City"),r.a.createElement("td",null,this.props.city)),r.a.createElement("tr",null,r.a.createElement("td",null,"Street"),r.a.createElement("td",null,this.props.street)),r.a.createElement("tr",null,r.a.createElement("td",null,"Population"),r.a.createElement("td",null,e.summary.population)),r.a.createElement("tr",null,r.a.createElement("td",null,"Median Age"),r.a.createElement("td",null,e.summary.median_age)),r.a.createElement("tr",null,r.a.createElement("td",null,"Median Household Income"),r.a.createElement("td",null,t.median)),r.a.createElement("tr",null,r.a.createElement("td",null,"Males"),r.a.createElement("td",null,e.summary.gender.males)),r.a.createElement("tr",null,r.a.createElement("td",null,"Females"),r.a.createElement("td",null,e.summary.gender.females))))))),r.a.createElement(ge.a,null,r.a.createElement(me.a.Toggle,{as:ge.a.Header,eventKey:"1"},"Social"),r.a.createElement(me.a.Collapse,{eventKey:"1"},r.a.createElement(ge.a.Body,null,r.a.createElement(me.a,{defaultActiveKey:"0"},r.a.createElement(a,{name:"Race",data:e.race,key_i:"0"}),r.a.createElement(a,{name:"Education",data:e.education,key_i:"1"}),r.a.createElement(a,{name:"Employment",data:e.employment,key_i:"2"}),r.a.createElement(a,{name:"Marital Status",data:e.marital_status,key_i:"3"}),r.a.createElement(a,{name:"Transportation",data:e.transportation,key_i:"4"}))))),r.a.createElement(a,{name:"Income",data:t,key_i:"2"})))}}]),t}(r.a.Component),_e=Object(B.a)(function(e){return e.address},function(e){return e}),Ce=Object(B.a)(function(e){return e.tract},function(e){return e}),we=Object(B.a)(function(e){return e.data_range},function(e){return e}),Se=Object(B.a)(Ce,_e,we,function(e,t,a){return{tract:e,address:t,data_range:a}}),Pe={onUpdateDataRange:function(e){return{type:ke,payload:{data_range:e}}}},Ue=Object(D.b)(Se,Pe)(Oe),Ae=a(167),Me=a(161),ze=a.n(Me),Te="places:updatePlaces";var Ie="active_place:activatePlace";function xe(e){return{type:Ie,payload:{active_place:e}}}var Re=a(162),De=a.n(Re);var Be="tract:updateTract";function Ne(e,t){for(var a=Le(e.lat),n=Le(e.lng),r=t,s=6371,o=[],c=0;c<1;c++){var i=Le(360*c),l=Math.asin(Math.sin(a)*Math.cos(r/s)+Math.cos(a)*Math.sin(r/s)*Math.cos(i)),p=n+Math.atan2(Math.sin(i)*Math.sin(r/s)*Math.cos(a),Math.cos(r/s)-Math.sin(a)*Math.sin(l)),u={};u.lat=Ze(l),u.lng=Ze(p),o.push(u)}return o}var Le=function(e){return e*(Math.PI/180)},Ze=function(e){return e*(180/Math.PI)},Fe=function(e,t,a,n){return new U.d.maps.Circle({strokeColor:t,strokeOpacity:.5,strokeWeight:4,fillColor:"#00ff00",fillOpacity:0,map:a,center:n,radius:e})},Ge=function(e,t,a,n,r,s){return new U.d.maps.Marker({key:e,position:t,map:a,title:n,icon:r,labelContent:s})};var He="http://maps.google.com/mapfiles/ms/icons/yellow-dot.png",Ke="http://maps.google.com/mapfiles/ms/icons/red-dot.png",We="http://maps.google.com/mapfiles/ms/icons/green-dot.png",Ye=a(163),Je=a.n(Ye),Qe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={checked:!0},a.handleChange=a.handleChange.bind(Object(w.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({checked:e}),this.props.switchFunction(e)}},{key:"render",value:function(){return r.a.createElement("label",{htmlFor:"material-switch"},r.a.createElement(Je.a,{checked:this.state.checked,onChange:this.handleChange,onColor:"#86d3ff",onHandleColor:"#2693e6",handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:20,width:48,className:"react-switch",id:"material-switch"}))}}]),t}(n.Component),Xe=new U.d.maps.InfoWindow,Ve=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).updateMarkers=function(e){Array.from(a.props.places).map(function(t,n){var r=t.id,s="";s=r===a.props.active_place.id?We:t.types.includes(a.props.business_type)?Ke:He;var o=Ge(n,t.geometry.location,e,t.name,s);a.state.markers.set(r,{marker:o,place:t})}),a.updateInfoWindow(e)},a.updateInfoWindow=function(e){return Array.from(a.state.markers,function(t){var n=Object(Ae.a)(t,2),r=(n[0],n[1]);r.marker.addListener("click",function(){a.onUpdateActivePlace(r.place),a.updatePlaceDetails(function(){Xe.setContent(De.a.renderToStaticMarkup(a.getInfoContent(r.place))),Xe.marker=r,Xe.open(e,r.marker)})})})},a.getPlaceDetails=function(e,t,a){var n={placeId:t,fields:["formatted_address","opening_hours","website"]};new U.d.maps.places.PlacesService(e).getDetails(n,function(e,t){t===U.d.maps.places.PlacesServiceStatus.OK?a(e):console.log("error",t)})},a.getOpen=function(e){return void 0===e?"Unknown":e.is_open?"Yes":"No"},a.updateMarker=function(e){var t="";t=e.place.id===a.props.active_place.id?We:e.place.types.includes(a.props.business_type)?Ke:He,e.marker.setIcon(t)},a.handleSwitch=function(e){e?a.renderCartography():a.clearCartography()},a.state={center:a.props.center,map:void 0,markers:new Map,place_details:new Map,place_photos:new Map,address_line:a.props.address.street+", "+a.props.address.city+" "+a.props.address.state+", "+a.props.address.zip,boundaries:Ne(a.props.center,.804),cartography:{},display_cartography:!0},a.onUpdatePlaces=a.onUpdatePlaces.bind(Object(w.a)(a)),a.onUpdateActivePlace=a.onUpdateActivePlace.bind(Object(w.a)(a)),a.onUpdateTract=a.onUpdateTract.bind(Object(w.a)(a)),a.loadMorePlaces=a.loadMorePlaces.bind(Object(w.a)(a)),a.lessPlaces=a.lessPlaces.bind(Object(w.a)(a)),a.loadAllPlaces=a.loadAllPlaces.bind(Object(w.a)(a)),a.loadMorePlaces=a.loadMorePlaces.bind(Object(w.a)(a)),a.loadDefaultPlaces=a.loadDefaultPlaces.bind(Object(w.a)(a)),a.exampleRef=r.a.createRef(),a.updateMarkers=a.updateMarkers.bind(Object(w.a)(a)),a.updateMarker=a.updateMarker.bind(Object(w.a)(a)),a.updateInfoWindow=a.updateInfoWindow.bind(Object(w.a)(a)),a.getopen=a.getOpen.bind(Object(w.a)(a)),a.getPlaceDetails=a.getPlaceDetails.bind(Object(w.a)(a)),a.updatePlaceDetails=a.updatePlaceDetails.bind(Object(w.a)(a)),a.onBusinessFormChange=a.onBusinessFormChange.bind(Object(w.a)(a)),a.loadCartography=a.loadCartography.bind(Object(w.a)(a)),a.renderCartography=a.renderCartography.bind(Object(w.a)(a)),a.getInfoContent=a.getInfoContent.bind(Object(w.a)(a)),a.handleSwitch=a.handleSwitch.bind(Object(w.a)(a)),a.clearCartography=a.clearCartography.bind(Object(w.a)(a)),a.checkIsCity=a.checkIsCity.bind(Object(w.a)(a)),a.onPlacesCountChange=a.onPlacesCountChange.bind(Object(w.a)(a)),a.updateRadii=a.updateRadii.bind(Object(w.a)(a)),setInterval(function(){if(!!!Xe.getMap()&&void 0!=Xe.marker){var e="";e=Xe.marker.place.types.includes(a.props.business_type)?Ke:He,Xe.marker.marker.setIcon(e)}},500),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Z.a)(L.a.mark(function e(){var t;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadDefaultPlaces(),e.next=3,this.checkIsCity();case 3:t=e.sent,this.setState({isCity:t}),this.updateRadii();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){this.props.active_place!==e.active_place&&this.props.active_place.toString().length>0&&(this.setState({center:this.props.active_place.geometry.location}),e.active_place.toString().length>0&&this.updateMarker(this.state.markers.get(e.active_place.id)),this.state.markers.get(this.props.active_place.id).marker.setIcon(We),U.d.maps.event.trigger(this.state.markers.get(this.props.active_place.id).marker,"click")),this.props.places!==e.places&&void 0!=this.state.map&&(Array.from(this.state.markers).map(function(e,t){e[1].marker.setMap(null)}),this.updateMarkers(this.state.map)),void 0!==this.state.map&&this.props.data_range!==e.data_range&&this.state.display_cartography&&this.renderCartography()}},{key:"checkIsCity",value:function(){var e=Object(Z.a)(L.a.mark(function e(){var t,a;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=this.props.center.lat,r=this.props.center.lng,fetch(U.a+"demo/population/city/"+n+"/"+r).then(function(e){return e.json()}).catch(function(e){return console.error(e)})).then(function(e){return e}).catch(function(e){return console.error("city error",e)});case 2:return t=e.sent,a=Number(t[0].B01003_001E),console.log("RFM",a,a>=1e6),e.abrupt("return",a>=1e6);case 6:case"end":return e.stop()}var n,r},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"clearCartography",value:function(){var e=this;this.state.map.data.forEach(function(t){e.state.map.data.remove(t)})}},{key:"renderCartography",value:function(){var e=this;this.clearCartography(),this.props.data_range==je?void 0!==this.state.cartography.zip&&this.state.cartography.zip.forEach(function(t){return e.state.map.data.addGeoJson(t)}):"tradeZone"==this.props.data_range&&(void 0!==this.state.cartography.tradezone?this.state.cartography.tradezone.forEach(function(t){t.forEach(function(t){return e.state.map.data.addGeoJson(t)})}):setTimeout(function(){return e.renderCartography()},100))}},{key:"loadCartography",value:function(){var e,t,a,n=this;(function(e,t){var a=U.a+"cart/zip/"+e+"/"+t;return console.log(a),fetch(a).then(function(e){return e.json()}).catch(function(a){be(),console.error("Zip Cartography Error:",U.a+"cartography/zip/"+e+"/"+t,a)})})(this.props.address.state.toString().toLowerCase(),this.props.address.zip).then(function(e){var t=Object.assign({},n.state.cartography);t.zip=e,n.setState({cartography:t}),n.renderCartography()}),(e=this.props.address.state.toString().toLowerCase(),t=this.props.center.lat,a=this.props.center.lng,fetch(U.a+"cart/tradezone/"+e+"/"+t+"/"+a).then(function(e){return e.json()}).catch(function(n){be(),console.error("Trade Zone Cartography Error:",U.a+"zcartography/tradezone/"+e+"/"+t+"/"+a,n)})).then(function(e){var t=Object.assign({},n.state.cartography);t.tradezone=e,n.setState({cartography:t})})}},{key:"loadDefaultPlaces",value:function(){var e=this;z(this.props.address,this.props.business_type,function(t,a){var n=e.props.places.concat(t);e.setState({places:n}),e.setState({token:a},function(){e.onUpdatePlaces(t)})})}},{key:"loadPlaceType",value:function(e){var t=this;z(this.props.address,e,function(e,a){var n=t.props.places.concat(e);t.setState({places:n}),t.setState({token:a},function(){t.onUpdatePlaces(e)})})}},{key:"loadAllPlaces",value:function(){var e=this;z(this.props.address,"establishment",function(t,a){var n=e.props.places.concat(t);e.setState({places:n}),e.setState({token:a},function(){e.onUpdatePlaces(t)})})}},{key:"loadMorePlaces",value:function(){var e=this;this.props.places.length<60&&T(this.state.token,function(t,a){var n=e.props.places.concat(t);e.setState({places:n},function(){e.onUpdatePlaces(n)})})}},{key:"lessPlaces",value:function(){if(this.props.places.length>20){var e=this.props.places;e=e.slice(0,e.length-20),this.setState({places:e}),this.onUpdatePlaces(e)}}},{key:"onBusinessFormChange",value:function(e){console.log(this.state),this.setState(Object(C.a)({},e.target.name,e.target.value)),this.loadPlaceType(e.target.value)}},{key:"onPlacesCountChange",value:function(e){var t=this;if(console.log(this.state),this.setState({places_count:e.target.value}),20==e.target.value)a=(a=this.props.places).slice(0,20),this.setState({places:a}),this.onUpdatePlaces(a);else if(40==e.target.value){if(this.props.places.length<40)console.log("rfm","< 40"),T(this.state.token,function(e,a){var n=t.props.places.concat(e);t.setState({places:n},function(){t.onUpdatePlaces(n)})});else console.log("rfm",">= 40"),a=(a=this.props.places).slice(0,40),console.log(a.length),this.setState({places:a}),this.onUpdatePlaces(a)}else if(60==e.target.value)if(this.props.places.length<40)T(this.state.token,function(e,a){var n=t.props.places.concat(e);t.setState({places:n},function(){t.onUpdatePlaces(n)})}),T(this.state.token,function(e,a){var n=t.props.places.concat(e);t.setState({places:n},function(){t.onUpdatePlaces(n)})});else if(40==this.state.places.length)T(this.state.token,function(e,a){var n=t.props.places.concat(e);t.setState({places:n},function(){t.onUpdatePlaces(n)})});else{var a;a=(a=this.props.places).slice(0,60),this.setState({places:a}),this.onUpdatePlaces(a)}}},{key:"onUpdatePlaces",value:function(e){this.props.onUpdatePlaces(e)}},{key:"onUpdateActivePlace",value:function(e){this.props.onUpdateActivePlace(e)}},{key:"onUpdateTract",value:function(e){this.props.onUpdateTract(e)}},{key:"getInfoContent",value:function(e){return function(e){var t=this.state.place_details.get(e.id),a=this.state.place_photos.get(e.id);return r.a.createElement("div",{id:"content"},r.a.createElement("div",{id:"siteNotice"}),r.a.createElement("h3",{style:{textAlign:"center"}},e.name),r.a.createElement("br",null),r.a.createElement("img",{style:{display:"block",marginRight:"auto",marginLeft:"auto",width:"50%"},src:a}),r.a.createElement("br",null),r.a.createElement("div",{id:"bodyContent"},r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("strong",null,t.formatted_address)),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",href:t.website},t.website)),r.a.createElement("p",null,"Rating: ",e.rating," / 5.0",r.a.createElement("br",null),"Total Ratings: ",e.user_ratings_total,r.a.createElement("br",null),"Open Now: ",this.getOpen(e.opening_hours))))}.apply(this,[e])}},{key:"updateRadii",value:function(){if(void 0!=this.state.isCity)if(console.log("RFM",this.state.isCity),this.state.isCity){Fe(402,"#00ff00",this.state.map,this.state.center),Fe(804,"#ffff00",this.state.map,this.state.center);var e=Ne(this.state.center,.402);Ge("circle1",e[0],this.state.map,"0.25 miles",We),e=Ne(this.state.center,.804),Ge("circle1",e[0],this.state.map,"0.5 miles",He)}else if(!this.state.isCity){Fe(4828,"#00ff00",this.state.map,this.state.center),Fe(8046,"#ffff00",this.state.map,this.state.center);var t=Ne(this.state.center,4.828);Ge("circle1",t[0],this.state.map,"3 miles",We);t=Ne(this.state.center,8.046),Ge("circle1",t[0],this.state.map,"5 miles",He)}}},{key:"updatePlaceDetails",value:function(e){var t=this;this.state.place_details.has(this.props.active_place.id)?e():this.getPlaceDetails(this.state.map,this.props.active_place.place_id,function(a){t.state.place_details.set(t.props.active_place.id,a),t.state.place_photos.has(t.props.active_place.id)||(void 0!==t.props.active_place.photos?function(e,t,a,n){fetch(U.a+"places/photos/"+e+"/"+t+"/"+a,{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){return console.error("Photo fetch error:",e)})}(t.props.active_place.photos[0].photo_reference,400,400,function(a){t.state.place_photos.set(t.props.active_place.id,a.url),e()}):e())})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"map_container"},r.a.createElement(function(){var t,a;return r.a.createElement("div",{className:"map-control_bar"},r.a.createElement("div",{style:{marginLeft:"5%"}},r.a.createElement("p",{style:{textAlign:"center",marginBottom:"-3%"}}," Zone"),r.a.createElement(Qe,{switchFunction:e.handleSwitch})),r.a.createElement(f.a.Control,{value:e.state.business_type,as:"select",name:"business_type",onChange:e.onBusinessFormChange,style:{width:"200px",textAlign:"center",display:"inline",marginLeft:"75px",marginRight:"75px"}},r.a.createElement("option",null,"restaurant"),r.a.createElement("option",null,"bar"),r.a.createElement("option",null,"cafe"),r.a.createElement("option",null,"beauty_salon"),r.a.createElement("option",null,"clothing_store"),r.a.createElement("option",null,"convenvience_store"),r.a.createElement("option",null,"locksmith"),r.a.createElement("option",null,"bakery"),r.a.createElement("option",null,"car_dealer"),r.a.createElement("option",null,"supermarket")),r.a.createElement("button",(t={className:"map-control_button",onClick:e.loadDefaultPlaces},Object(C.a)(t,"className","map_buttons"),Object(C.a)(t,"style",{float:"right"}),t),"Competition"),r.a.createElement("button",(a={className:"map-control_button",onClick:e.loadAllPlaces},Object(C.a)(a,"className","map_buttons"),Object(C.a)(a,"style",{float:"right"}),a),"All"),r.a.createElement(f.a.Control,{value:e.state.places_count,as:"select",name:"places_count",onChange:e.onPlacesCountChange,style:{width:"100px",textAlign:"center",display:"inline",float:"right"}},r.a.createElement("option",null,"20"),r.a.createElement("option",null,"40"),r.a.createElement("option",null,"60")))},null),r.a.createElement("div",{style:{height:this.props.height}},r.a.createElement(ze.a,{options:U.e,bootstrapURLKeys:{key:U.b},defaultCenter:this.props.center,defaultZoom:this.props.zoom,center:this.state.center,yesIWantToUseGoogleMapApiInternals:!0,layerTypes:["TrafficLayer","TransitLayer"],id:"map",onGoogleApiLoaded:function(t){var a=t.map;t.maps;return function(t,a,n){e.state.map=t;var r=Ge(void 0,n,t,"Your Business","http://maps.google.com/mapfiles/ms/icons/blue-dot.png"),s="<h3>Your "+e.props.business_type.toString()+"</h3>";r.addListener("click",function(){Xe.setContent(s),Xe.open(t,r),Xe.marker=r,console.log(Xe)}),e.loadCartography()}(a,0,e.state.center)}})))}}]),t}(n.Component);Ve.defaultProps={defaultCenter:{lat:59.95,lng:30.33},defaultzoom:11};var qe=Object(B.a)(V,Y,J,Q,te,q,$,X,function(e,t,a,n,r,s,o,c){return{places:e,active_place:t,address:a,business_type:n,zip:r,state:s,tract:o,data_range:c}}),$e={onUpdatePlaces:function(e){return{type:Te,payload:{places:e}}},onUpdateActivePlace:xe,onUpdateTract:function(e){return{type:Be,payload:{tract:e}}}},et=Object(D.b)(qe,$e)(Ve),tt=a(43);var at=a(164);var nt=Object(tt.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case ye:return console.log("payload",n),n.user;case ve:return n.user;default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case H:return n.address;default:return e}},places:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Te:return n.places;default:return e}},business_type:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case I:return n.business_type;default:return e}},active_place:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Ie:return n.active_place;default:return e}},zip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case K:return n.zip;default:return e}},state:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case W:return n.state;default:return e}},tract:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Be:return n.tract;default:return e}},data_range:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case ke:return n.data_range;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case R:return n.ready;default:return e}}}),rt=Object(tt.d)(Object(tt.a)(at.a)),st=Object(tt.e)(nt,{user:"Rob",address:void 0,places:[],business_type:"restaurant",active_place:void 0,state:void 0,zip:void 0,tract:void 0,data_range:je,ready:!1},rt);console.log("store init state: ",st.getState());var ot=st,ct=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state=ot.getState(),a.onUpdateActivePlace=a.onUpdateActivePlace.bind(Object(w.a)(a)),a.activatePlace=a.activatePlace.bind(Object(w.a)(a)),ot.subscribe(function(){a.setState(ot.getState())}),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onUpdateActivePlace",value:function(e){this.props.onUpdateActivePlace(e)}},{key:"activatePlace",value:function(e){console.log("click"),this.onUpdateActivePlace(e.target.value)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"places-list"},r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("strong",null,"Nearby Businesses")),r.a.createElement(de.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,this.props.places.map(function(t,a){return r.a.createElement("tr",{key:a,onClick:function(){return e.onUpdateActivePlace(t)}},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("img",{src:t.icon,style:{width:"32px",height:"32px"}})))}))))}}]),t}(r.a.Component),it=Object(B.a)(function(e){return e.active_place},function(e){return e}),lt=Object(B.a)(function(e){return e.places},function(e){return e}),pt=Object(B.a)(it,lt,function(e,t){return{active_place:e,places:t}}),ut={onUpdateActivePlace:xe},dt=Object(D.b)(pt,ut)(ct),ht=(a(253),a(45)),mt=a(165),ft=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){if(console.log("store",this.props),window.scrollTo({top:0,behavior:"smooth"}),this.props.ready){console.log("sign",this.props.address.coords.lat.toString(),this.props.address.coords.lng.toString(),"/maps/api/streetview?size=600x200&location="+this.props.address.coords.lat.toString()+","+this.props.address.coords.lng.toString()+"&heading=151.78&pitch=-0.76&key="+U.b);this.props.address.coords;var e=r.a.createElement("div",null,r.a.createElement("div",{className:"results-container"},r.a.createElement(Ue,{business_type:this.props.business_type,street:this.props.address.street,city:this.props.address.city,state:this.props.address.state,zip:this.props.address.zip,lat:this.props.address.coords.lat,lng:this.props.address.coords.lng,orientation:"demographics-list-vertical "}),r.a.createElement(et,{height:"75vh",address:this.props.address,center:this.props.address.coords,zoom:15,business_type:this.props.business_type}),r.a.createElement(dt,null)),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(ht.StaticGoogleMap,{size:"600x200",maptype:"satellite",zoom:"18",apiKey:U.b},r.a.createElement(ht.Marker.Group,{label:"You",color:"brown"},r.a.createElement(ht.Marker,{location:this.props.address.coords}))),r.a.createElement("img",{src:"https://maps.googleapis.com"+Object(mt.a)("/maps/api/streetview?size=600x200&location="+this.props.address.coords.lat.toString()+","+this.props.address.coords.lng.toString()+"&heading=0&pitch=0&sensor=false&key="+U.b)})));r.a.createElement("div",null,r.a.createElement("div",{className:"results-container"},r.a.createElement(Ue,{business_type:this.props.business_type,street:this.props.address.street,city:this.props.address.city,state:this.props.address.state,zip:this.props.address.zip,lat:this.props.address.coords.lat,lng:this.props.address.coords.lng,orientation:"demographics-list-vertical "}),r.a.createElement("div",{style:{width:"80%",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement(ht.StaticGoogleMap,{size:"2200x800",maptype:"satellite",zoom:"18",apiKey:U.b},r.a.createElement(ht.Marker.Group,{label:"You",color:"brown"},r.a.createElement(ht.Marker,{location:this.props.address.coords}))))),r.a.createElement(dt,null)),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{style:{width:"20%",height:"10%"}},r.a.createElement(et,{height:"25vh",address:this.props.address,center:this.props.address.coords,zoom:15,business_type:this.props.business_type})))),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(Ue,{business_type:this.props.business_type,street:this.props.address.street,city:this.props.address.city,state:this.props.address.state,zip:this.props.address.zip,lat:this.props.address.coords.lat,lng:this.props.address.coords.lng,orientation:"demographics-list-horizontal"}))}return r.a.createElement("div",null,r.a.createElement(_,null),e,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(pe,null))))}}]),t}(r.a.Component),gt=Object(B.a)(ee,J,Q,ae,function(e,t,a,n){return{user:e,address:t,business_type:a,ready:n}}),yt=Object(D.b)(gt)(ft);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=a(166),bt=document.getElementById("root");o.a.render(r.a.createElement(D.a,{store:ot},r.a.createElement(vt.a,{basename:"/Landmark-Frontend"},r.a.createElement(yt,null))),bt),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return c});var n="http://localhost:8080/",r="AIzaSyDc1QhQx9sfS2E-ZdM0cDQuVtM_NlQhdSU",s=window.google,o="lpkXmFKRjuqOM9YXgLIrGRlPWIA=",c={streetViewControl:!0,scaleControl:!0,fullscreenControl:!1,styles:[{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}],gestureHandling:"greedy",disableDoubleClickZoom:!0,minZoom:5,maxZoom:100,mapTypeControl:!0,mapTypeId:s.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:s.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:s.maps.ControlPosition.BOTTOM_CENTER,mapTypeIds:[s.maps.MapTypeId.ROADMAP,s.maps.MapTypeId.SATELLITE,s.maps.MapTypeId.HYBRID]},zoomControl:!0,clickableIcons:!1}},74:function(e,t,a){}},[[168,1,2]]]);
//# sourceMappingURL=main.3e435e89.chunk.js.map